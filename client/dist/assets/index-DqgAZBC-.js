import{r as l,j as e,R}from"./react-BdizSdlO.js";import{c as T}from"./react-dom-Bqx_4PLd.js";import{L as u,u as U,c as B,R as z}from"./react-router-dom-CKRfohja.js";import{c as O}from"./zustand-MCd1cxGJ.js";import{a as q}from"./axios-C8DqakIB.js";import{O as F,f as V,g as w,A as N,c as f}from"./react-router-B9aeWDXj.js";import{_ as b}from"./react-countup-RB4SzNdv.js";import"./leaflet-DzFr0_qj.js";import{M as H,P as W,a as _,T as $}from"./react-leaflet-DmESJxOB.js";import{p as J}from"./dompurify-B551CwFq.js";import{f as Q}from"./timeago.js-BojVbZw0.js";import{l as Y}from"./socket.io-client-BGdex47s.js";import{R as G}from"./react-quill-CrsNtXXs.js";import{f as k}from"./@remix-run-Cq6_3E0Z.js";import{A as K,a as X,b as Z,c as ee,d as se}from"./react-accessible-accordion-GrUQrpkB.js";import{H as ae,M as te,a as re,b as ie,c as ne,B as P,d as le}from"./react-icons-MKrTmZ2Q.js";import{e as ce}from"./@emailjs-DfBlkqaH.js";import{S}from"./sweetalert2-DwEdJQJv.js";import"./countup.js-C3UHJDiT.js";import"./scheduler-CzFDRTuY.js";import"./use-sync-external-store-VmDAZ5l9.js";import"./@react-leaflet-hqhBTUq-.js";import"./engine.io-client-BY_6WtMP.js";import"./engine.io-parser-BiEtp6m2.js";import"./@socket.io-Dkula2eQ.js";import"./socket.io-parser-BBkuslX-.js";import"./lodash-jQiDicVT.js";import"./quill-DJRIEkU5.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const m of n.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&i(m)}).observe(document,{childList:!0,subtree:!0});function t(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(r){if(r.ep)return;r.ep=!0;const n=t(r);fetch(r.href,n)}})();const j=l.createContext(),oe=({children:s})=>{const[a,t]=l.useState(JSON.parse(localStorage.getItem("user"))||null),i=r=>{t(r)};return l.useEffect(()=>{localStorage.setItem("user",JSON.stringify(a))},[a]),e.jsx(j.Provider,{value:{currentUser:a,updateUser:i},children:s})},p=q.create({baseURL:"http://localhost:8888/api",withCredentials:!0}),C=O(s=>({number:0,fetch:async()=>{const a=await p("/users/notification");s({number:a.data})},decrease:()=>{s(a=>({number:a.number-1}))},reset:()=>{s({number:0})}}));function I(){const[s,a]=l.useState(!1),{currentUser:t}=l.useContext(j),i=C(n=>n.fetch),r=C(n=>n.number);return t&&i(),e.jsxs("nav",{children:[e.jsxs("div",{className:"left",children:[e.jsx(u,{to:"/",className:"logo",children:e.jsx("span",{children:"🏠 JOJO.Estate"})}),e.jsx(u,{to:"/",children:"Home"}),e.jsx(u,{to:"/about",children:"About"}),e.jsx(u,{to:"/contact",children:"Contact"}),e.jsx("a",{href:"/",children:"Support"})]}),e.jsxs("div",{className:"right",children:[t?e.jsxs("div",{className:"user",children:[e.jsx("img",{src:t.avatar||"/noavatar.jpg",alt:"avatar"}),e.jsx("span",{children:t.username}),e.jsxs(u,{to:"/profile",className:"profile",children:[r>0&&e.jsx("div",{className:"notification",children:r}),e.jsx("span",{children:"Profile"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(u,{to:"/login",children:"Sign in"}),e.jsx(u,{to:"/register",className:"register",children:"Sign up"})]}),e.jsx("div",{className:"menuIcon",children:e.jsx("img",{src:"/menu.png",alt:"menu",onClick:()=>a(n=>!n)})}),e.jsxs("div",{className:s?"menu active":"menu",children:[e.jsx(u,{to:"/",children:"Home"}),e.jsx(u,{to:"/about",children:"About"}),e.jsx(u,{to:"/contact",children:"Contact"}),e.jsx("a",{href:"/",children:"Support"}),e.jsx(u,{to:"/login",children:"Sign in"}),e.jsx(u,{to:"/register",children:"Sign up"})]})]})]})}function de(){return e.jsxs("div",{className:"layout",children:[e.jsx("div",{className:"navbar",children:e.jsx(I,{})}),e.jsx("div",{className:"content",children:e.jsx(F,{})})]})}function me(){const{currentUser:s}=l.useContext(j);return s?e.jsxs("div",{className:"layout",children:[e.jsx("div",{className:"navbar",children:e.jsx(I,{})}),e.jsx("div",{className:"content",children:e.jsx(F,{})})]}):e.jsx(V,{to:"/login"})}const he=["buy","rent"];function xe(){const[s,a]=l.useState({type:"buy",city:"",minPrice:0,maxPrice:0}),t=r=>{a(n=>({...n,type:r}))},i=r=>{a(n=>({...n,[r.target.name]:r.target.value}))};return e.jsxs("div",{className:"searchBar",children:[e.jsx("div",{className:"type",children:he.map(r=>e.jsx("button",{onClick:()=>t(r),className:s.type===r?"active":"",children:r},r))}),e.jsxs("form",{children:[e.jsx("input",{type:"text",name:"city",placeholder:"City",onChange:i}),e.jsx("input",{type:"number",name:"minPrice",min:0,max:1e7,placeholder:"Min Price",onChange:i}),e.jsx("input",{type:"number",name:"maxPrice",min:0,max:1e7,placeholder:"Max Price",onChange:i}),e.jsx(u,{className:"link",to:`/list?type=${s.type}&city=${s.city}&minPrice=${s.minPrice}&maxPrice=${s.maxPrice}`,children:e.jsx("button",{children:e.jsx("img",{src:"/search.png",alt:"search"})})})]})]})}function ue(){return l.useContext(j),e.jsxs("div",{className:"homePage",children:[e.jsx("div",{className:"textContainer",children:e.jsxs("div",{className:"wrapper",children:[e.jsxs("h1",{className:"title",children:[e.jsx("span",{className:"small-text",children:"From "}),e.jsx("span",{className:"animated-text",children:"Real Estate"}),e.jsx("br",{}),e.jsx("span",{className:"small-text",children:"To "}),e.jsx("span",{className:"animated-text",children:"Dream Place"})]}),e.jsx("p",{children:"Our real estate advisors understand the true value of your property and will find the right buyer for you. With customized marketing strategies and access to our global customer network, we ensure your property gets the attention it deserves."}),e.jsx(xe,{}),e.jsxs("div",{className:"boxes",children:[e.jsxs("div",{className:"box",children:[e.jsxs("h1",{children:[e.jsx(b,{end:10,duration:5}),e.jsx("span",{className:"span",children:" +"})]}),e.jsx("h2",{children:"Years of Experience"})]}),e.jsxs("div",{className:"box",children:[e.jsxs("h1",{children:[e.jsx(b,{start:90,end:100,duration:5}),e.jsx("span",{className:"span",children:" +"})]}),e.jsx("h2",{children:"Award Gained"})]}),e.jsxs("div",{className:"box",children:[e.jsxs("h1",{children:[e.jsx(b,{start:990,end:1e3,duration:5}),e.jsx("span",{className:"span",children:" +"})]}),e.jsx("h2",{children:"Property Ready"})]})]})]})}),e.jsx("div",{className:"imgContainer",children:e.jsx("img",{src:"/bg.png",alt:"background"})})]})}function pe(){const[s,a]=U(),[t,i]=l.useState({type:s.get("type")||"",city:s.get("city")||"",property:s.get("property")||"",minPrice:s.get("minPrice")||"",maxPrice:s.get("maxPrice")||"",bedroom:s.get("bedroom")||""}),r=m=>{i({...t,[m.target.name]:m.target.value})},n=()=>{a(t)};return e.jsxs("div",{className:"filter",children:[e.jsxs("h1",{children:["Search results for ",e.jsx("b",{children:s.get("city")})]}),e.jsx("div",{className:"top",children:e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"city",children:"Location"}),e.jsx("input",{type:"text",id:"city",name:"city",placeholder:"City Location",onChange:r,defaultValue:t.city})]})}),e.jsxs("div",{className:"bottom",children:[e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"type",children:"Type"}),e.jsxs("select",{name:"type",id:"type",onChange:r,defaultValue:t.type,children:[e.jsx("option",{value:"",children:"any"}),e.jsx("option",{value:"buy",children:"Buy"}),e.jsx("option",{value:"rent",children:"Rent"})]})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"property",children:"Property"}),e.jsxs("select",{name:"property",id:"property",onChange:r,defaultValue:t.property,children:[e.jsx("option",{value:"",children:"any"}),e.jsx("option",{value:"apartment",children:"Apartment"}),e.jsx("option",{value:"house",children:"House"}),e.jsx("option",{value:"condo",children:"Condo"}),e.jsx("option",{value:"land",children:"Land"})]})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"minPrice",children:"Min Price"}),e.jsx("input",{type:"number",id:"minPrice",name:"minPrice",placeholder:"any",onChange:r,defaultValue:t.minPrice})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"maxPrice",children:"Max Price"}),e.jsx("input",{type:"text",id:"maxPrice",name:"maxPrice",placeholder:"any",onChange:r,defaultValue:t.maxPrice})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"bedroom",children:"Bedroom"}),e.jsx("input",{type:"text",id:"bedroom",name:"bedroom",placeholder:"any",onChange:r,defaultValue:t.bedroom})]}),e.jsx("button",{onClick:n,children:e.jsx("img",{src:"/search.png",alt:""})})]})]})}function A({item:s}){return e.jsxs("div",{className:"card",children:[e.jsx(u,{to:`/${s.id}`,className:"imageContainer",children:e.jsx("img",{src:s.images[0],alt:""})}),e.jsxs("div",{className:"textContainer",children:[e.jsx("h2",{className:"title",children:e.jsx(u,{to:`/${s.id}`,children:s.title})}),e.jsxs("p",{className:"address",children:[e.jsx("img",{src:"/pin.png",alt:""}),e.jsx("span",{children:s.address})]}),e.jsxs("p",{className:"price",children:["€ ",s.price]}),e.jsxs("div",{className:"bottom",children:[e.jsxs("div",{className:"features",children:[e.jsxs("div",{className:"feature",children:[e.jsx("img",{src:"/bed.png",alt:""}),e.jsxs("span",{children:[s.bedroom," bedroom"]})]}),e.jsxs("div",{className:"feature",children:[e.jsx("img",{src:"/bath.png",alt:""}),e.jsxs("span",{children:[s.bathroom," bathroom"]})]})]}),e.jsxs("div",{className:"icons",children:[e.jsx("div",{className:"icon",children:e.jsx("img",{src:"/save.png",alt:""})}),e.jsx("div",{className:"icon",children:e.jsx("img",{src:"/chat.png",alt:""})})]})]})]})]})}function je({item:s}){return e.jsx(H,{position:[s.latitude,s.longitude],children:e.jsx(W,{children:e.jsxs("div",{className:"popupContainer",children:[e.jsx("img",{src:s.images[0],alt:""}),e.jsxs("div",{className:"textContainer",children:[e.jsx(u,{to:`/${s.id}`,children:s.title}),e.jsxs("span",{children:[s.bedroom," bedroom"]}),e.jsxs("b",{children:["$ ",s.price]})]})]})})})}function L({items:s}){return e.jsxs(_,{center:s.length===1?[s[0].latitude,s[0].longitude]:[51.1634,10.4477],zoom:5,scrollWheelZoom:!1,className:"map",children:[e.jsx($,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),s.map(a=>e.jsx(je,{item:a},a.id))]})}const y=()=>e.jsx("div",{className:"loading-page",children:e.jsx("div",{className:"loader"})});function ge(){const s=w();return e.jsxs("div",{className:"listPage",children:[e.jsx("div",{className:"listContainer",children:e.jsxs("div",{className:"wrapper",children:[e.jsx(pe,{}),e.jsx(l.Suspense,{fallback:e.jsx(y,{}),children:e.jsx(N,{resolve:s.postResponse,errorElement:e.jsx("p",{children:"Error loading posts!"}),children:a=>a.data.map(t=>e.jsx(A,{item:t},t.id))})})]})}),e.jsx("div",{className:"mapContainer",children:e.jsx(l.Suspense,{fallback:e.jsx(y,{}),children:e.jsx(N,{resolve:s.postResponse,errorElement:e.jsx("p",{children:"Error loading posts!"}),children:a=>e.jsx(L,{items:a.data})})})})]})}function ve({images:s}){const[a,t]=l.useState(null),i=r=>{r==="left"?t(a===0?s.length-1:a-1):a===s.length-1?t(0):t(a+1)};return e.jsxs("div",{className:"slider",children:[a!==null&&e.jsxs("div",{className:"fullSlider",children:[e.jsx("div",{className:"arrow",onClick:()=>i("left"),children:e.jsx("img",{src:"/arrow.png",alt:""})}),e.jsx("div",{className:"imgContainer",children:e.jsx("img",{src:s[a],alt:""})}),e.jsx("div",{className:"arrow",onClick:()=>i("right"),children:e.jsx("img",{src:"/arrow.png",className:"right",alt:""})}),e.jsx("div",{className:"close",onClick:()=>t(null),children:"X"})]}),e.jsx("div",{className:"bigImage",children:e.jsx("img",{src:s[0],alt:"",onClick:()=>t(0)})}),e.jsx("div",{className:"smallImages",children:s.slice(1).map((r,n)=>e.jsx("img",{src:r,alt:"",onClick:()=>t(n+1)},n))})]})}function fe(){const s=w(),a=f(),[t,i]=l.useState(s.isSaved),{currentUser:r}=l.useContext(j),n=async()=>{r||a("/login"),i(d=>!d);try{await p.post("/users/save",{postId:s.id})}catch(d){console.log(d),i(x=>!x)}},m=()=>{a("/profile")};return e.jsxs("div",{className:"singlePage",children:[e.jsx("div",{className:"details",children:e.jsxs("div",{className:"wrapper",children:[e.jsx(ve,{images:s.images}),e.jsxs("div",{className:"info",children:[e.jsxs("div",{className:"top",children:[e.jsxs("div",{className:"post",children:[e.jsx("h1",{children:s.title}),e.jsxs("div",{className:"address",children:[e.jsx("img",{src:"/pin.png",alt:""}),e.jsx("span",{children:s.address})]}),e.jsxs("div",{className:"price",children:["€ ",s.price]})]}),e.jsxs("div",{className:"user",children:[e.jsx("img",{src:s.user.avatar,alt:"avatar"}),e.jsx("span",{children:s.user.username})]})]}),e.jsx("div",{className:"bottom",dangerouslySetInnerHTML:{__html:J.sanitize(s.postDetail.desc)}})]})]})}),e.jsx("div",{className:"features",children:e.jsxs("div",{className:"wrapper",children:[e.jsx("p",{className:"title",children:"General"}),e.jsxs("div",{className:"listVertical",children:[e.jsxs("div",{className:"feature",children:[e.jsx("img",{src:"/utility.png",alt:""}),e.jsxs("div",{className:"featureText",children:[e.jsx("span",{children:"Utilities"}),s.postDetail.utilities==="owner"?e.jsx("p",{children:"Owner is responsible"}):e.jsx("p",{children:"Tenant is responsible"})]})]}),e.jsxs("div",{className:"feature",children:[e.jsx("img",{src:"/pet.png",alt:""}),e.jsxs("div",{className:"featureText",children:[e.jsx("span",{children:"Pet Policy"}),s.postDetail.pet==="allowed"?e.jsx("p",{children:"Pets Allowed"}):e.jsx("p",{children:"Pets not Allowed"})]})]}),e.jsxs("div",{className:"feature",children:[e.jsx("img",{src:"/fee.png",alt:""}),e.jsxs("div",{className:"featureText",children:[e.jsx("span",{children:"Income Policy"}),e.jsx("p",{children:s.postDetail.income})]})]})]}),e.jsx("p",{className:"title",children:"Sizes"}),e.jsxs("div",{className:"sizes",children:[e.jsxs("div",{className:"size",children:[e.jsx("img",{src:"/size.png",alt:""}),e.jsxs("span",{children:[s.postDetail.size," sqft"]})]}),e.jsxs("div",{className:"size",children:[e.jsx("img",{src:"/bed.png",alt:""}),e.jsxs("span",{children:[s.bedroom," beds"]})]}),e.jsxs("div",{className:"size",children:[e.jsx("img",{src:"/bath.png",alt:""}),e.jsxs("span",{children:[s.bathroom," bathrooms"]})]})]}),e.jsx("p",{className:"title",children:"Nearby Places"}),e.jsxs("div",{className:"listHorizontal",children:[e.jsxs("div",{className:"feature",children:[e.jsx("img",{src:"/school.png",alt:""}),e.jsxs("div",{className:"featureText",children:[e.jsx("span",{children:"School"}),e.jsxs("p",{children:[s.postDetail.school>999?s.postDetail.school/1e3+"km":s.postDetail.school+"m"," ","away"]})]})]}),e.jsxs("div",{className:"feature",children:[e.jsx("img",{src:"/pet.png",alt:""}),e.jsxs("div",{className:"featureText",children:[e.jsx("span",{children:"Bus Stop"}),e.jsxs("p",{children:[s.postDetail.bus,"m away"]})]})]}),e.jsxs("div",{className:"feature",children:[e.jsx("img",{src:"/fee.png",alt:""}),e.jsxs("div",{className:"featureText",children:[e.jsx("span",{children:"Restaurant"}),e.jsxs("p",{children:[s.postDetail.restaurant,"m away"]})]})]})]}),e.jsx("p",{className:"title",children:"Location"}),e.jsx("div",{className:"mapContainer",children:e.jsx(L,{items:[s]})}),e.jsxs("div",{className:"buttons",children:[e.jsxs("button",{onClick:m,children:[e.jsx("img",{src:"/chat.png",alt:""}),"Send a Message"]}),e.jsxs("button",{onClick:n,style:{backgroundColor:t?"#fece51":"white"},children:[e.jsx("img",{src:"/save.png",alt:"save"}),t?"Place Saved":"Save the Place"]})]})]})})]})}function E({posts:s}){return e.jsx("div",{className:"list",children:s.map(a=>e.jsx(A,{item:a},a.id))})}const D=l.createContext(),Ne=({children:s})=>{const{currentUser:a}=l.useContext(j),[t,i]=l.useState(null);return l.useEffect(()=>{i(Y("http://localhost:4444"))},[]),l.useEffect(()=>{a&&(t==null||t.emit("newUser",a.id))},[a,t]),e.jsx(D.Provider,{value:{socket:t},children:s})};function ye({chats:s}){const[a,t]=l.useState(null),{currentUser:i}=l.useContext(j),{socket:r}=l.useContext(D),n=l.useRef();l.useEffect(()=>{var c;(c=n.current)==null||c.scrollIntoView({behavior:"smooth"})},[a]);const m=C(c=>c.decrease),d=async(c,o)=>{try{const h=await p("/chats/"+c);h.data.seenBy.includes(i.id)||m(),t({...h.data,receiver:o})}catch(h){console.log(h)}},x=async c=>{c.preventDefault();const h=new FormData(c.target).get("text");if(h)try{const v=await p.post("/messages/"+a.id,{text:h});t(g=>({...g,messages:[...g.messages,v.data]})),c.target.reset(),r.emit("sendMessage",{receiverId:a.receiver.id,data:v.data})}catch(v){console.log(v)}};return l.useEffect(()=>{const c=async()=>{try{await p.put("/chats/read/"+a.id)}catch(o){console.log(o)}};return a&&r&&r.on("getMessage",o=>{a.id===o.chatId&&(t(h=>({...h,messages:[...h.messages,o]})),c())}),()=>{r.off("getMessage")}},[r,a]),e.jsxs("div",{className:"chat",children:[e.jsxs("div",{className:"messages",children:[e.jsx("h1",{children:"Messages"}),s==null?void 0:s.map(c=>e.jsxs("div",{className:"message",style:{backgroundColor:c.seenBy.includes(i.id)||(a==null?void 0:a.id)===c.id?"white":"#fecd514e"},onClick:()=>d(c.id,c.receiver),children:[e.jsx("img",{src:c.receiver.avatar||"/noavatar.jpg",alt:""}),e.jsx("span",{children:c.receiver.username}),e.jsx("p",{children:c.lastMessage})]},c.id))]}),a&&e.jsxs("div",{className:"chatBox",children:[e.jsxs("div",{className:"top",children:[e.jsxs("div",{className:"user",children:[e.jsx("img",{src:a.receiver.avatar||"noavatar.jpg",alt:""}),a.receiver.username]}),e.jsx("span",{className:"close",onClick:()=>t(null),children:"X"})]}),e.jsxs("div",{className:"center",children:[a.messages.map(c=>e.jsxs("div",{className:"chatMessage",style:{alignSelf:c.userId===i.id?"flex-end":"flex-start",textAlign:c.userId===i.id?"right":"left"},children:[e.jsx("p",{children:c.text}),e.jsx("span",{children:Q(c.createdAt)})]},c.id)),e.jsx("div",{ref:n})]}),e.jsxs("form",{onSubmit:x,className:"bottom",children:[e.jsx("textarea",{name:"text"}),e.jsx("button",{children:"Send"})]})]})]})}function be(){const s=w(),{updateUser:a,currentUser:t}=l.useContext(j),i=f(),r=async()=>{try{await p.post("/auth/logout"),a(null),i("/")}catch(n){console.log(n)}};return e.jsxs("div",{className:"profilePage",children:[e.jsx("div",{className:"details",children:e.jsxs("div",{className:"wrapper",children:[e.jsxs("div",{className:"title",children:[e.jsx("h1",{children:"User Information"}),e.jsx(u,{to:"/profile/update",children:e.jsx("button",{children:"Update Profile"})})]}),e.jsxs("div",{className:"info",children:[e.jsxs("span",{children:["Avatar:",e.jsx("img",{src:t.avatar||"noavatar.jpg",alt:""})]}),e.jsxs("span",{children:["Username: ",e.jsx("b",{children:t.username})]}),e.jsxs("span",{children:["E-mail: ",e.jsx("b",{children:t.email})]}),e.jsx("button",{onClick:r,children:"Logout"})]}),e.jsxs("div",{className:"title",children:[e.jsx("h1",{children:"My List"}),e.jsx(u,{to:"/add",children:e.jsx("button",{children:"Create New Post"})})]}),e.jsx(l.Suspense,{fallback:e.jsx(y,{}),children:e.jsx(N,{resolve:s.postResponse,errorElement:e.jsx("p",{children:"Error loading all posts!"}),children:n=>e.jsx(E,{posts:n.data.userPosts})})}),e.jsx("div",{className:"title",children:e.jsx("h1",{children:"Saved List"})}),e.jsx(l.Suspense,{fallback:e.jsx(y,{}),children:e.jsx(N,{resolve:s.postResponse,errorElement:e.jsx("p",{children:"Error loading saved posts!"}),children:n=>e.jsx(E,{posts:n.data.savedPosts})})})]})}),e.jsx("div",{className:"chatContainer",children:e.jsx("div",{className:"wrapper",children:e.jsx(l.Suspense,{fallback:e.jsx("p",{children:"Loading..."}),children:e.jsx(N,{resolve:s.chatResponse,errorElement:e.jsx("p",{children:"Error loading chats!"}),children:n=>e.jsx(ye,{chats:n.data})})})})})]})}function Ce(){const[s,a]=l.useState(""),[t,i]=l.useState(!1),{updateUser:r}=l.useContext(j),n=f(),m=async d=>{d.preventDefault(),i(!0),a("");const x=new FormData(d.target),c=x.get("email"),o=x.get("password");try{const h=await p.post("/auth/login",{email:c,password:o});r(h.data),n("/")}catch(h){a(h.response.data.message)}finally{i(!1)}};return e.jsxs("div",{className:"login",children:[e.jsx("div",{className:"formContainer",children:e.jsxs("form",{onSubmit:m,children:[e.jsx("h1",{children:"Welcome back"}),e.jsx("input",{name:"email",required:!0,type:"email",placeholder:"Email"}),e.jsx("input",{name:"password",type:"password",required:!0,placeholder:"Password"}),e.jsx("button",{disabled:t,children:"Login"}),s&&e.jsx("span",{children:s}),e.jsxs(u,{to:"/register",children:["Don't"," you have an account?"]})]})}),e.jsx("div",{className:"imgContainer",children:e.jsx("img",{src:"/bg.png",alt:""})})]})}function we(){const[s,a]=l.useState(""),[t,i]=l.useState(!1),r=f(),n=async m=>{m.preventDefault(),a(""),i(!0);const d=new FormData(m.target),x=d.get("username"),c=d.get("email"),o=d.get("password");try{const h=await p.post("/auth/register",{username:x,email:c,password:o});r("/login")}catch(h){a(h.response.data.message)}finally{i(!1)}};return e.jsxs("div",{className:"registerPage",children:[e.jsx("div",{className:"formContainer",children:e.jsxs("form",{onSubmit:n,children:[e.jsx("h1",{children:"Create an Account"}),e.jsx("input",{name:"username",type:"text",placeholder:"Username"}),e.jsx("input",{name:"email",type:"text",placeholder:"Email"}),e.jsx("input",{name:"password",type:"password",placeholder:"Password"}),e.jsx("button",{disabled:t,children:"Register"}),s&&e.jsx("span",{children:s}),e.jsx(u,{to:"/login",children:"Do you have an account?"})]})}),e.jsx("div",{className:"imgContainer",children:e.jsx("img",{src:"/bg.png",alt:""})})]})}const Pe=l.createContext();function M({uwConfig:s,setPublicId:a,setState:t}){const[i,r]=l.useState(!1);l.useEffect(()=>{if(!i)if(document.getElementById("uw"))r(!0);else{const d=document.createElement("script");d.setAttribute("async",""),d.setAttribute("id","uw"),d.src="https://upload-widget.cloudinary.com/global/all.js",d.addEventListener("load",()=>r(!0)),document.body.appendChild(d)}},[i]);const n=()=>{if(i){var m=window.cloudinary.createUploadWidget(s,(d,x)=>{!d&&x&&x.event==="success"&&(console.log("Done! Here is the image info: ",x.info),t(c=>[...c,x.info.secure_url]))});document.getElementById("upload_widget").addEventListener("click",function(){m.open()},!1)}};return e.jsx(Pe.Provider,{value:{loaded:i},children:e.jsx("button",{id:"upload_widget",className:"cloudinary-button",onClick:n,children:"Upload"})})}function Se(){const{currentUser:s,updateUser:a}=l.useContext(j),[t,i]=l.useState(""),[r,n]=l.useState([]),m=f(),d=async x=>{x.preventDefault();const c=new FormData(x.target),{username:o,email:h,password:v}=Object.fromEntries(c);try{const g=await p.put(`/users/${s.id}`,{username:o,email:h,password:v,avatar:r[0]});a(g.data),m("/profile")}catch(g){console.log(g),i(g.response.data.message)}};return e.jsxs("div",{className:"profileUpdatePage",children:[e.jsx("div",{className:"formContainer",children:e.jsxs("form",{onSubmit:d,children:[e.jsx("h1",{children:"Update Profile"}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"username",children:"Username"}),e.jsx("input",{id:"username",name:"username",type:"text",defaultValue:s.username})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{id:"email",name:"email",type:"email",defaultValue:s.email})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password"})]}),e.jsx("button",{children:"Update"}),t&&e.jsx("span",{children:"error"})]})}),e.jsxs("div",{className:"sideContainer",children:[e.jsx("img",{src:r[0]||s.avatar||"/noavatar.jpg",alt:"",className:"avatar"}),e.jsx(M,{uwConfig:{cloudName:"daxnlq46a",uploadPreset:"Ai_Estate",multiple:!1,maxImageFileSize:2e6,folder:"avatars"},setState:n})]})]})}function Ee(){const[s,a]=l.useState(""),[t,i]=l.useState([]),[r,n]=l.useState(""),m=f(),d=async x=>{x.preventDefault();const c=new FormData(x.target),o=Object.fromEntries(c);console.log(o);try{const h=await p.post("/posts",{postData:{title:o.title,price:parseInt(o.price),address:o.address,city:o.city,bedroom:parseInt(o.bedroom),bathroom:parseInt(o.bathroom),type:o.type,property:o.property,latitude:parseFloat(o.latitude),longitude:parseFloat(o.longitude),images:t},postDetail:{desc:s,utilities:o.utilities,pet:o.pet,income:o.income,size:parseInt(o.size),school:parseInt(o.school),bus:parseInt(o.bus),restaurant:parseInt(o.restaurant)}});m("/"+h.data.id)}catch(h){console.log(h),n("Something went wrong.")}};return e.jsxs("div",{className:"newPostPage",children:[e.jsxs("div",{className:"formContainer",children:[e.jsx("h1",{children:"Add New Post"}),e.jsx("div",{className:"wrapper",children:e.jsxs("form",{onSubmit:d,children:[e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"title",children:"Title"}),e.jsx("input",{id:"title",name:"title",type:"text"})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"price",children:"Price"}),e.jsx("input",{min:0,id:"price",name:"price",type:"number"})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"address",children:"Address"}),e.jsx("input",{id:"address",name:"address",type:"text"})]}),e.jsxs("div",{className:"item description",children:[e.jsx("label",{htmlFor:"desc",children:"Description"}),e.jsx(G,{theme:"snow",onChange:a,value:s})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"city",children:"City"}),e.jsx("input",{id:"city",name:"city",type:"text"})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"bedroom",children:"Bedroom Number"}),e.jsx("input",{min:1,id:"bedroom",name:"bedroom",type:"number"})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"bathroom",children:"Bathroom Number"}),e.jsx("input",{min:1,id:"bathroom",name:"bathroom",type:"number"})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"latitude",children:"Latitude"}),e.jsx("input",{id:"latitude",name:"latitude",type:"text"})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"longitude",children:"Longitude"}),e.jsx("input",{id:"longitude",name:"longitude",type:"text"})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"type",children:"Type"}),e.jsxs("select",{name:"type",children:[e.jsx("option",{value:"rent",defaultChecked:!0,children:"Rent"}),e.jsx("option",{value:"buy",children:"Buy"})]})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"type",children:"Property"}),e.jsxs("select",{name:"property",children:[e.jsx("option",{value:"apartment",children:"Apartment"}),e.jsx("option",{value:"house",children:"House"}),e.jsx("option",{value:"condo",children:"Condo"}),e.jsx("option",{value:"land",children:"Land"})]})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"utilities",children:"Utilities Policy"}),e.jsxs("select",{name:"utilities",children:[e.jsx("option",{value:"owner",children:"Owner is responsible"}),e.jsx("option",{value:"tenant",children:"Tenant is responsible"}),e.jsx("option",{value:"shared",children:"Shared"})]})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"pet",children:"Pet Policy"}),e.jsxs("select",{name:"pet",children:[e.jsx("option",{value:"allowed",children:"Allowed"}),e.jsx("option",{value:"not-allowed",children:"Not Allowed"})]})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"income",children:"Income Policy"}),e.jsx("input",{id:"income",name:"income",type:"text",placeholder:"Income Policy"})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"size",children:"Total Size (sqft)"}),e.jsx("input",{min:0,id:"size",name:"size",type:"number"})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"school",children:"School"}),e.jsx("input",{min:0,id:"school",name:"school",type:"number"})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"bus",children:"bus"}),e.jsx("input",{min:0,id:"bus",name:"bus",type:"number"})]}),e.jsxs("div",{className:"item",children:[e.jsx("label",{htmlFor:"restaurant",children:"Restaurant"}),e.jsx("input",{min:0,id:"restaurant",name:"restaurant",type:"number"})]}),e.jsx("button",{className:"sendButton",children:"Add"}),r&&e.jsx("span",{children:r})]})})]}),e.jsxs("div",{className:"sideContainer",children:[t.map((x,c)=>e.jsx("img",{src:x,alt:"images"},c)),e.jsx(M,{uwConfig:{multiple:!0,cloudName:"daxnlq46a",uploadPreset:"Ai_Estate",folder:"posts"},setState:i})]})]})}const Fe=()=>e.jsxs("div",{style:{textAlign:"center",marginTop:"50px"},children:[e.jsx("h1",{children:"404 - Page Not Found"}),e.jsx("p",{children:"Sorry, the page you are looking for does not exist."})]}),ke=async({request:s,params:a})=>(await p("/posts/"+a.id)).data,Ie=async({request:s,params:a})=>{const t=s.url.split("?")[1],i=p("/posts?"+t);return k({postResponse:i})},Ae=async()=>{const s=p("/users/profilePosts"),a=p("/chats");return k({postResponse:s,chatResponse:a})},Le=[{icon:e.jsx(ae,{}),heading:"Best interest rates on the market",detail:"Exercitation in fugiat est ut ad ea cupidatat ut in cupidatat occaecat ut occaecat consequat est minim minim esse tempor laborum consequat esse adipisicing eu reprehenderit enim."},{icon:e.jsx(te,{}),heading:"Prevent unstable prices",detail:"Exercitation in fugiat est ut ad ea cupidatat ut in cupidatat occaecat ut occaecat consequat est minim minim esse tempor laborum consequat esse adipisicing eu reprehenderit enim."},{icon:e.jsx(re,{}),heading:"Best price on the market",detail:"Exercitation in fugiat est ut ad ea cupidatat ut in cupidatat occaecat ut occaecat consequat est minim minim esse tempor laborum consequat esse adipisicing eu reprehenderit enim."}],De=()=>{const[s,a]=l.useState("collapsed");return e.jsxs("div",{className:"aboutPage",children:[e.jsxs("div",{className:"textContainer",children:[e.jsx("h3",{children:"Our Value"}),e.jsx("h1",{children:"Value We Give to You"}),e.jsxs("span",{children:["We are always ready to help by providing the best services for you.",e.jsx("br",{}),"We believe a good place to live can make your life better."]}),e.jsx(K,{className:"accordion",allowMultipleExpanded:!1,preExpanded:[0],children:Le.map((t,i)=>e.jsxs(X,{className:`accordionItem ${s===i?"expanded":"collapsed"}`,uuid:i,children:[e.jsx(Z,{children:e.jsxs(ee,{className:"accordionButton",onClick:()=>a(s===i?null:i),children:[e.jsx("div",{className:"icon",children:t.icon}),e.jsx("span",{className:"primaryText",children:t.heading}),e.jsx("div",{className:"icon",children:e.jsx(ie,{size:20,className:s===i?"rotated":""})})]})}),e.jsx(se,{children:e.jsx("p",{className:"secondaryText",children:t.detail})})]},i))})]}),e.jsx("div",{className:"imgContainer",children:e.jsx("img",{src:"/about.png",alt:"About"})})]})},Me=({openForm:s,setOpenForm:a})=>{const t=l.useRef(null),i=n=>{n.preventDefault(),ce.sendForm("service_5ytr1n6","template_ejxnkkf",t.current,{publicKey:"HC-QiFRKEiF7eEu5i"}).then(()=>{S.fire({title:"Success!",text:"Message sent successfully",icon:"success",confirmButtonText:"Cool"}),t.current.reset()},m=>{S.fire({title:"Error!",text:"Message could not be sent, please try again.",icon:"error",confirmButtonText:"Okay"})})},r=()=>{a(!1)};return e.jsx("div",{className:`container  ${s?"":"hide"}`,children:e.jsxs("div",{className:"wrap",children:[e.jsx("button",{className:"closeButton",onClick:r,children:"X"}),e.jsx("h1",{children:"Contact Form"}),e.jsx("p",{children:"Feel free to reach out to us for any questions!"}),e.jsxs("form",{ref:t,onSubmit:i,children:[e.jsx("div",{children:"Email Me 🚀"}),e.jsx("input",{placeholder:"Your Email",name:"user_email",required:!0}),e.jsx("input",{placeholder:"Your Name",name:"user_name",required:!0}),e.jsx("textarea",{placeholder:"Message",name:"message",rows:8,required:!0}),e.jsx("input",{type:"submit",value:"Send"})]})]})})},Re=()=>{const[s,a]=l.useState(!1);return e.jsxs("div",{className:"contactPage",children:[e.jsxs("div",{className:"textContainer",children:[e.jsx("h3",{children:"For All"}),e.jsx("h1",{children:"Easy to contact us"}),e.jsx("span",{className:"secondaryText",children:"We always ready to help by providing the best services for you. We believe a good place to live can make your life better."}),e.jsxs("div",{className:"contactContainer",children:[e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"mode",children:[e.jsxs("div",{className:"flexStart",children:[e.jsx("div",{className:"icon",children:e.jsx(ne,{size:25})}),e.jsxs("div",{className:"detail",children:[e.jsx("span",{className:"primaryText",children:"Call"}),e.jsx("span",{className:"secondaryText",children:"099 333 666 999"})]})]}),e.jsx("div",{className:"button",onClick:()=>window.location.href="tel:099333666999",children:"Call now"})]}),e.jsxs("div",{className:"mode",children:[e.jsxs("div",{className:"flexStart",children:[e.jsx("div",{className:"icon",children:e.jsx(P,{size:25})}),e.jsxs("div",{className:"detail",children:[e.jsx("span",{className:"primaryText",children:"Chat"}),e.jsx("span",{className:"secondaryText",children:"099 333 666 999"})]})]}),e.jsx("div",{className:"button",children:"Chat now"})]})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"mode",children:[e.jsxs("div",{className:"flexStart",children:[e.jsx("div",{className:"icon",children:e.jsx(P,{size:25})}),e.jsxs("div",{className:"detail",children:[e.jsx("span",{className:"primaryText",children:"Video Call"}),e.jsx("span",{className:"secondaryText",children:"099 333 666 999"})]})]}),e.jsx("div",{className:"button",children:"Video Call now"})]}),e.jsxs("div",{className:"mode",children:[e.jsxs("div",{className:"flexStart",children:[e.jsx("div",{className:"icon",children:e.jsx(le,{size:25})}),e.jsxs("div",{className:"detail",children:[e.jsx("span",{className:"primaryText",children:"Message"}),e.jsx("span",{className:"secondaryText",children:"099 333 666 999"})]})]}),e.jsx("div",{className:"button",onClick:()=>{a(!0)},children:"Message now"})]})]})]}),s&&e.jsx(Me,{openForm:s,setOpenForm:a})]}),e.jsx("div",{className:"imgContainer",children:e.jsx("img",{src:"/contact.png",alt:"Contact"})})]})};function Te(){const s=B([{path:"/",element:e.jsx(de,{}),children:[{path:"/",element:e.jsx(ue,{})},{path:"/about",element:e.jsx(De,{})},{path:"/contact",element:e.jsx(Re,{})},{path:"/list",element:e.jsx(ge,{}),loader:Ie},{path:"/:id",element:e.jsx(fe,{}),loader:ke},{path:"/login",element:e.jsx(Ce,{})},{path:"/register",element:e.jsx(we,{})}]},{path:"/",element:e.jsx(me,{}),children:[{path:"/profile",element:e.jsx(be,{}),loader:Ae},{path:"/profile/update",element:e.jsx(Se,{})},{path:"/add",element:e.jsx(Ee,{})}]},{path:"*",element:e.jsx(Fe,{})}]);return e.jsx(z,{router:s})}T.createRoot(document.getElementById("root")).render(e.jsx(R.StrictMode,{children:e.jsx(oe,{children:e.jsx(Ne,{children:e.jsx(Te,{})})})}));
